#ifndef _CUST_BATTERY_METER_TABLE_H
#define _CUST_BATTERY_METER_TABLE_H

#include <mach/mt_typedefs.h>

// ============================================================
// define
// ============================================================
#define BAT_NTC_10 0
#define BAT_NTC_47 0
#define BAT_NTC_68 1 

#if (BAT_NTC_10 == 1)
#define RBAT_PULL_UP_R             16900	
#define RBAT_PULL_DOWN_R		   27000	
#endif

#if (BAT_NTC_47 == 1)
#define RBAT_PULL_UP_R             61900	
#define RBAT_PULL_DOWN_R		  100000	
#endif

#if (BAT_NTC_68 == 1)
#define RBAT_PULL_UP_R             62000	/* 62K */
#define RBAT_PULL_DOWN_R		  100000	/* 100K */
#endif

#define RBAT_PULL_UP_VOLT          1800



// ============================================================
// ENUM
// ============================================================

// ============================================================
// structure
// ============================================================

// ============================================================
// typedef
// ============================================================
typedef struct _BATTERY_PROFILE_STRUC
{
    kal_int32 percentage;
    kal_int32 voltage;
} BATTERY_PROFILE_STRUC, *BATTERY_PROFILE_STRUC_P;

typedef struct _R_PROFILE_STRUC
{
    kal_int32 resistance; // Ohm
    kal_int32 voltage;
} R_PROFILE_STRUC, *R_PROFILE_STRUC_P;

typedef enum
{
    T1_0C,
    T2_25C,
    T3_50C
} PROFILE_TEMPERATURE;

// ============================================================
// External Variables
// ============================================================

// ============================================================
// External function
// ============================================================

// ============================================================
// <DOD, Battery_Voltage> Table
// ============================================================
#if (BAT_NTC_10 == 1)
    BATT_TEMPERATURE Batt_Temperature_Table[] = {
        {-20,68237},
        {-15,53650},
        {-10,42506},
        { -5,33892},
        {  0,27219},
        {  5,22021},
        { 10,17926},
        { 15,14674},
        { 20,12081},
        { 25,10000},
        { 30,8315},
        { 35,6948},
        { 40,5834},
        { 45,4917},
        { 50,4161},
        { 55,3535},
        { 60,3014}
    };
#endif

#if (BAT_NTC_47 == 1)
    BATT_TEMPERATURE Batt_Temperature_Table[] = {
        {-20,483954},
        {-15,360850},
        {-10,271697},
        { -5,206463},
        {  0,158214},
        {  5,122259},
        { 10,95227},
        { 15,74730},
        { 20,59065},
        { 25,47000},
        { 30,37643},
        { 35,30334},
        { 40,24591},
        { 45,20048},
        { 50,16433},
        { 55,13539},
        { 60,11210}        
    };
#endif

#if (BAT_NTC_68 == 1)
    BATT_TEMPERATURE Batt_Temperature_Table[] = {
        {-20,738931},
        {-15,547472},
        {-10,409600},
        { -5,309299},
        {  0,235622},
        {  5,181001},
        { 10,140153},
        { 15,109349},
        { 20,85934},
        { 25,68000},
        { 30,54165},
        { 35,43418},
        { 40,35014},
        { 45,28400},
        { 50,23164},
        { 55,17733},
        { 60,15656}        
    };
#endif

// T0 -10C
BATTERY_PROFILE_STRUC battery_profile_t0[] =
{
    {0  ,	4288},
    {2  ,	4258},
    {5  ,	4228},
    {7  ,	4194},
    {9  ,	4159},
    {12 ,	4126},
    {14 ,	4100},
    {17 ,	4078},
    {19 ,	4053},
    {21 ,	4029},
    {24 ,	4006},
    {26 ,	3986},
    {28 ,	3968},
    {31 ,	3951},
    {33 ,	3936},
    {35 ,	3918},
    {38 ,	3900},
    {40 ,	3883},
    {42 ,	3868},
    {45 ,	3852},
    {47 ,	3840},
    {50 ,	3829},
    {52 ,	3820},
    {54 ,	3812},
    {57 ,	3803},
    {59 ,	3798},
    {61 ,	3794},
    {64 ,	3791},
    {66 ,	3786},
    {68 ,	3784},
    {71 ,	3781},
    {73 ,	3776},
    {75 ,	3771},
    {78 ,	3763},
    {80 ,	3752},
    {83 ,	3741},
    {85 ,	3729},
    {87 ,	3718},
    {89 ,	3708},
    {90 ,	3705},
    {91 ,	3702},
    {92 ,	3700},
    {93 ,	3698},
    {93 ,	3695},
    {94 ,	3695},
    {94 ,	3693},
    {94 ,	3693},
    {95 ,	3692},
    {95 ,	3690},
    {96 ,	3689},
    {96 ,	3688},
    {96 ,	3689},
    {96 ,	3689},
    {97 ,	3688},
    {97 ,	3686},
    {97 ,	3686},
    {97 ,	3684},
    {98 ,	3684},
    {98 ,	3682},
    {98 ,	3681},
    {98 ,	3682},
    {98 ,	3680},
    {98 ,	3680},
    {99 ,	3678},
    {99 ,	3677},
    {99 ,	3677},
    {99 ,	3674},
    {99 ,	3674},
    {99 ,	3672},
    {99 ,	3670},
    {100    ,	3669},
    {100    ,	3668},
    {100    ,	3666},
    {100    ,	3664},
    {100    ,	3663},
    {100    ,	3661}
};      
        
// T1 0C 
BATTERY_PROFILE_STRUC battery_profile_t1[] =
{
    {0  ,	4298},
    {2  ,	4261},
    {4  ,	4233},
    {6  ,	4209},
    {8  ,	4187},
    {11 ,	4163},
    {13 ,	4142},
    {15 ,	4121},
    {17 ,	4099},
    {19 ,	4084},
    {21 ,	4062},
    {23 ,	4041},
    {25 ,	4017},
    {27 ,	3998},
    {30 ,	3981},
    {32 ,	3967},
    {34 ,	3953},
    {36 ,	3937},
    {38 ,	3919},
    {40 ,	3901},
    {42 ,	3881},
    {44 ,	3866},
    {46 ,	3852},
    {49 ,	3839},
    {51 ,	3829},
    {53 ,	3821},
    {55 ,	3813},
    {57 ,	3804},
    {59 ,	3799},
    {61 ,	3792},
    {63 ,	3788},
    {65 ,	3785},
    {68 ,	3783},
    {70 ,	3780},
    {72 ,	3778},
    {74 ,	3776},
    {76 ,	3771},
    {78 ,	3763},
    {80 ,	3754},
    {82 ,	3741},
    {84 ,	3724},
    {87 ,	3704},
    {89 ,	3696},
    {91 ,	3689},
    {93 ,	3683},
    {95 ,	3673},
    {97 ,	3630},
    {98 ,	3602},
    {98 ,	3584},
    {98 ,	3570},
    {98 ,	3558},
    {99 ,	3548},
    {99 ,	3541},
    {99 ,	3534},
    {99 ,	3526},
    {99 ,	3521},
    {99 ,	3517},
    {99 ,	3512},
    {99 ,	3507},
    {99 ,	3502},
    {99 ,	3498},
    {100    ,	3496},
    {100    ,	3491},
    {100    ,	3489},
    {100    ,	3486},
    {100    ,	3483},
    {100    ,	3480},
    {100    ,	3475},
    {100    ,	3474},
    {100    ,	3471},
    {100    ,	3468},
    {100    ,	3467},
    {100    ,	3463},
    {100    ,	3462},
    {100    ,	3460},
    {100    ,	3458}
};           

// T2 25C
BATTERY_PROFILE_STRUC battery_profile_t2[] =
{
    {0  ,	4330},
    {2  ,	4299},
    {4  ,	4275},
    {6  ,	4250},
    {8  ,	4227},
    {10 ,	4203},
    {12 ,	4180},
    {14 ,	4159},
    {16 ,	4137},
    {18 ,	4116},
    {20 ,	4097},
    {22 ,	4076},
    {24 ,	4058},
    {26 ,	4037},
    {28 ,	4018},
    {30 ,	4000},
    {32 ,	3985},
    {34 ,	3970},
    {36 ,	3956},
    {39 ,	3941},
    {41 ,	3928},
    {43 ,	3911},
    {45 ,	3894},
    {47 ,	3871},
    {49 ,	3854},
    {51 ,	3839},
    {53 ,	3830},
    {55 ,	3821},
    {57 ,	3814},
    {59 ,	3805},
    {61 ,	3799},
    {63 ,	3793},
    {65 ,	3790},
    {67 ,	3785},
    {69 ,	3780},
    {71 ,	3776},
    {73 ,	3773},
    {75 ,	3770},
    {77 ,	3763},
    {79 ,	3755},
    {81 ,	3746},
    {83 ,	3735},
    {85 ,	3716},
    {87 ,	3696},
    {89 ,	3685},
    {91 ,	3682},
    {93 ,	3679},
    {95 ,	3671},
    {97 ,	3610},
    {99 ,	3480},
    {100    ,	3330},
    {100    ,	3300},
    {100    ,	3285},
    {100    ,	3279},
    {100    ,	3274},
    {100    ,	3270},
    {100    ,	3267},
    {100    ,	3265},
    {100    ,	3264},
    {100    ,	3264},
    {100    ,	3263},
    {100    ,	3263},
    {100    ,	3262},
    {100    ,	3262},
    {100    ,	3261},
    {100    ,	3260},
    {100    ,	3260},
    {100    ,	3259},
    {100    ,	3258},
    {100    ,	3258},
    {100    ,	3258},
    {100    ,	3256},
    {100    ,	3256},
    {100    ,	3254},
    {100    ,	3253},
    {100    ,	3253}
};     

// T3 50C
BATTERY_PROFILE_STRUC battery_profile_t3[] =
{
    {0  ,	4336},
    {2  ,	4309},
    {4  ,	4284},
    {6  ,	4260},
    {8  ,	4236},
    {10 ,	4213},
    {12 ,	4190},
    {14 ,	4169},
    {16 ,	4147},
    {18 ,	4125},
    {20 ,	4104},
    {22 ,	4083},
    {24 ,	4064},
    {26 ,	4044},
    {28 ,	4026},
    {31 ,	4008},
    {33 ,	3991},
    {35 ,	3976},
    {37 ,	3959},
    {39 ,	3945},
    {41 ,	3930},
    {43 ,	3917},
    {45 ,	3901},
    {47 ,	3877},
    {49 ,	3857},
    {51 ,	3844},
    {53 ,	3834},
    {55 ,	3824},
    {57 ,	3815},
    {59 ,	3806},
    {61 ,	3801},
    {63 ,	3794},
    {65 ,	3788},
    {67 ,	3783},
    {69 ,	3778},
    {71 ,	3772},
    {73 ,	3760},
    {75 ,	3750},
    {77 ,	3744},
    {79 ,	3736},
    {81 ,	3726},
    {83 ,	3717},
    {85 ,	3699},
    {88 ,	3677},
    {90 ,	3672},
    {92 ,	3669},
    {94 ,	3664},
    {96 ,	3650},
    {98 ,	3574},
    {100    ,	3433},
    {100    ,	3277},
    {100    ,	3258},
    {100    ,	3252},
    {100    ,	3251},
    {100    ,	3249},
    {100    ,	3248},
    {100    ,	3246},
    {100    ,	3245},
    {100    ,	3246},
    {100    ,	3246},
    {100    ,	3245},
    {100    ,	3244},
    {100    ,	3243},
    {100    ,	3244},
    {100    ,	3243},
    {100    ,	3242},
    {100    ,	3242},
    {100    ,	3241},
    {100    ,	3241},
    {100    ,	3242},
    {100    ,	3239},
    {100    ,	3240},
    {100    ,	3237},
    {100    ,	3238},
    {100    ,	3237},
    {100    ,	3235}
};           

// battery profile for actual temperature. The size should be the same as T1, T2 and T3
BATTERY_PROFILE_STRUC battery_profile_temperature[] =
{
  {0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },  
	{0  , 0 }, 
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },  
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 }
};    

// ============================================================
// <Rbat, Battery_Voltage> Table
// ============================================================
// T0 -10C
R_PROFILE_STRUC r_profile_t0[] =
{
    {360    ,	4288},
    {485    ,	4258},
    {500    ,	4228},
    {518    ,	4194},
    {553    ,	4159},
    {615    ,	4126},
    {668    ,	4100},
    {705    ,	4078},
    {723    ,	4053},
    {738    ,	4029},
    {723    ,	4006},
    {723    ,	3986},
    {730    ,	3968},
    {745    ,	3951},
    {750    ,	3936},
    {748    ,	3918},
    {743    ,	3900},
    {750    ,	3883},
    {760    ,	3868},
    {755    ,	3852},
    {753    ,	3840},
    {763    ,	3829},
    {785    ,	3820},
    {798    ,	3812},
    {800    ,	3803},
    {810    ,	3798},
    {833    ,	3794},
    {865    ,	3791},
    {895    ,	3786},
    {923    ,	3784},
    {948    ,	3781},
    {978    ,	3776},
    {1030   ,	3771},
    {1065   ,	3763},
    {1088   ,	3752},
    {1135   ,	3741},
    {1190   ,	3729},
    {1250   ,	3718},
    {1275   ,	3708},
    {1263   ,	3705},
    {1255   ,	3702},
    {1253   ,	3700},
    {1248   ,	3698},
    {1238   ,	3695},
    {1238   ,	3695},
    {1235   ,	3693},
    {1235   ,	3693},
    {1230   ,	3692},
    {1228   ,	3690},
    {1225   ,	3689},
    {1228   ,	3688},
    {1225   ,	3689},
    {1225   ,	3689},
    {1223   ,	3688},
    {1215   ,	3686},
    {1218   ,	3686},
    {1215   ,	3684},
    {1210   ,	3684},
    {1208   ,	3682},
    {1205   ,	3681},
    {1210   ,	3682},
    {1203   ,	3680},
    {1203   ,	3680},
    {1198   ,	3678},
    {1195   ,	3677},
    {1193   ,	3677},
    {1188   ,	3674},
    {1185   ,	3674},
    {1185   ,	3672},
    {1180   ,	3670},
    {1180   ,	3669},
    {1173   ,	3668},
    {1168   ,	3666},
    {1173   ,	3664},
    {1168   ,	3663},
    {1158   ,	3661}
};      

// T1 0C
R_PROFILE_STRUC r_profile_t1[] =
{
    {268    ,	4298},
    {340    ,	4261},
    {350    ,	4233},
    {355    ,	4209},
    {360    ,	4187},
    {363    ,	4163},
    {373    ,	4142},
    {373    ,	4121},
    {375    ,	4099},
    {390    ,	4084},
    {403    ,	4062},
    {413    ,	4041},
    {413    ,	4017},
    {413    ,	3998},
    {405    ,	3981},
    {420    ,	3967},
    {425    ,	3953},
    {425    ,	3937},
    {418    ,	3919},
    {413    ,	3901},
    {400    ,	3881},
    {395    ,	3866},
    {385    ,	3852},
    {388    ,	3839},
    {388    ,	3829},
    {395    ,	3821},
    {398    ,	3813},
    {403    ,	3804},
    {410    ,	3799},
    {420    ,	3792},
    {420    ,	3788},
    {435    ,	3785},
    {455    ,	3783},
    {463    ,	3780},
    {493    ,	3778},
    {510    ,	3776},
    {538    ,	3771},
    {568    ,	3763},
    {590    ,	3754},
    {618    ,	3741},
    {655    ,	3724},
    {678    ,	3704},
    {710    ,	3696},
    {768    ,	3689},
    {863    ,	3683},
    {975    ,	3673},
    {1080   ,	3630},
    {1008   ,	3602},
    {963    ,	3584},
    {928    ,	3570},
    {898    ,	3558},
    {875    ,	3548},
    {853    ,	3541},
    {840    ,	3534},
    {823    ,	3526},
    {810    ,	3521},
    {798    ,	3517},
    {788    ,	3512},
    {775    ,	3507},
    {758    ,	3502},
    {745    ,	3498},
    {740    ,	3496},
    {738    ,	3491},
    {730    ,	3489},
    {723    ,	3486},
    {710    ,	3483},
    {715    ,	3480},
    {700    ,	3475},
    {693    ,	3474},
    {698    ,	3471},
    {680    ,	3468},
    {673    ,	3467},
    {668    ,	3463},
    {670    ,	3462},
    {655    ,	3460},
    {670    ,	3458}
};     

// T2 25C
R_PROFILE_STRUC r_profile_t2[] =
{
    {150    ,	4330},
    {143    ,	4299},
    {145    ,	4275},
    {143    ,	4250},
    {143    ,	4227},
    {143    ,	4203},
    {143    ,	4180},
    {148    ,	4159},
    {150    ,	4137},
    {153    ,	4116},
    {160    ,	4097},
    {160    ,	4076},
    {163    ,	4058},
    {165    ,	4037},
    {173    ,	4018},
    {175    ,	4000},
    {185    ,	3985},
    {185    ,	3970},
    {190    ,	3956},
    {195    ,	3941},
    {203    ,	3928},
    {195    ,	3911},
    {193    ,	3894},
    {168    ,	3871},
    {153    ,	3854},
    {143    ,	3839},
    {148    ,	3830},
    {150    ,	3821},
    {153    ,	3814},
    {150    ,	3805},
    {155    ,	3799},
    {155    ,	3793},
    {165    ,	3790},
    {163    ,	3785},
    {163    ,	3780},
    {168    ,	3776},
    {168    ,	3773},
    {170    ,	3770},
    {165    ,	3763},
    {163    ,	3755},
    {168    ,	3746},
    {175    ,	3735},
    {173    ,	3716},
    {178    ,	3696},
    {175    ,	3685},
    {193    ,	3682},
    {213    ,	3679},
    {238    ,	3671},
    {238    ,	3610},
    {285    ,	3480},
    {328    ,	3330},
    {255    ,	3300},
    {213    ,	3285},
    {200    ,	3279},
    {190    ,	3274},
    {178    ,	3270},
    {168    ,	3267},
    {168    ,	3265},
    {160    ,	3264},
    {165    ,	3264},
    {160    ,	3263},
    {165    ,	3263},
    {158    ,	3262},
    {160    ,	3262},
    {158    ,	3261},
    {158    ,	3260},
    {163    ,	3260},
    {160    ,	3259},
    {163    ,	3258},
    {158    ,	3258},
    {150    ,	3258},
    {158    ,	3256},
    {160    ,	3256},
    {160    ,	3254},
    {158    ,	3253},
    {153    ,	3253}
}; 

// T3 50C
R_PROFILE_STRUC r_profile_t3[] =
{
    {150    ,	4336},
    {118    ,	4309},
    {120    ,	4284},
    {115    ,	4260},
    {115    ,	4236},
    {115    ,	4213},
    {120    ,	4190},
    {125    ,	4169},
    {128    ,	4147},
    {125    ,	4125},
    {130    ,	4104},
    {125    ,	4083},
    {133    ,	4064},
    {130    ,	4044},
    {138    ,	4026},
    {138    ,	4008},
    {135    ,	3991},
    {145    ,	3976},
    {140    ,	3959},
    {148    ,	3945},
    {153    ,	3930},
    {163    ,	3917},
    {165    ,	3901},
    {148    ,	3877},
    {128    ,	3857},
    {128    ,	3844},
    {125    ,	3834},
    {123    ,	3824},
    {123    ,	3815},
    {125    ,	3806},
    {130    ,	3801},
    {138    ,	3794},
    {135    ,	3788},
    {140    ,	3783},
    {143    ,	3778},
    {143    ,	3772},
    {133    ,	3760},
    {128    ,	3750},
    {128    ,	3744},
    {130    ,	3736},
    {130    ,	3726},
    {133    ,	3717},
    {130    ,	3699},
    {125    ,	3677},
    {133    ,	3672},
    {138    ,	3669},
    {143    ,	3664},
    {143    ,	3650},
    {150    ,	3574},
    {173    ,	3433},
    {193    ,	3277},
    {148    ,	3258},
    {133    ,	3252},
    {128    ,	3251},
    {125    ,	3249},
    {123    ,	3248},
    {120    ,	3246},
    {118    ,	3245},
    {120    ,	3246},
    {120    ,	3246},
    {115    ,	3245},
    {115    ,	3244},
    {110    ,	3243},
    {115    ,	3244},
    {113    ,	3243},
    {110    ,	3242},
    {118    ,	3242},
    {108    ,	3241},
    {113    ,	3241},
    {118    ,	3242},
    {113    ,	3239},
    {113    ,	3240},
    {110    ,	3237},
    {113    ,	3238},
    {113    ,	3237},
    {110    ,	3235}
}; 

// r-table profile for actual temperature. The size should be the same as T1, T2 and T3
R_PROFILE_STRUC r_profile_temperature[] =
{
  {0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },  
	{0  , 0 }, 
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },  
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 }
};    

// ============================================================
// function prototype
// ============================================================
int fgauge_get_saddles(void);
BATTERY_PROFILE_STRUC_P fgauge_get_profile(kal_uint32 temperature);

int fgauge_get_saddles_r_table(void);
R_PROFILE_STRUC_P fgauge_get_profile_r_table(kal_uint32 temperature);

#endif	//#ifndef _CUST_BATTERY_METER_TABLE_H

